<script>import BlockStyles from "../block-styles.svelte";
import Block from "../../block.svelte";
import InteractiveElement from "../interactive-element.svelte";
import { getWrapperProps } from "./component-ref.helpers.js";
import "../../../content/wrap-component-ref.js";
export let isInteractive;
export let componentRef;
export let componentOptions;
export let builderBlock;
export let context;
export let includeBlockProps;
export let blockChildren;
export let registeredComponents;
let Wrapper = isInteractive ? InteractiveElement : componentRef;
</script>

{#if componentRef}
  <svelte:component
    this={Wrapper}
    {...getWrapperProps({
      componentOptions: componentOptions,
      builderBlock: builderBlock,
      context: context,
      componentRef: componentRef,
      includeBlockProps: includeBlockProps,
      isInteractive: isInteractive,
      contextValue: $context,
    })}
  >
    {#each blockChildren as child ("block-" + child.id)}
      <Block block={child} {context} {registeredComponents} />
    {/each}

    {#each blockChildren as child ("block-style-" + child.id)}
      <BlockStyles block={child} context={$context} />
    {/each}
  </svelte:component>
{/if}