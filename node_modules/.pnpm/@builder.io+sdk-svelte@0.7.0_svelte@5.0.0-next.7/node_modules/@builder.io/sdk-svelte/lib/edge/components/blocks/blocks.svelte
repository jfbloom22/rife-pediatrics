<script context="module"></script>

<script>import { getContext } from "svelte";
import BlockStyles from "../block/components/block-styles.svelte";
import Block from "../block/block.svelte";
import BlocksWrapper from "./blocks-wrapper.svelte";
import BuilderContext from "../../context/builder.context.js";
import ComponentsContext from "../../context/components.context.js";
export let blocks;
export let parent;
export let path;
export let styleProp;
export let context = undefined;
export let registeredComponents = undefined;
let builderContext = getContext(BuilderContext.key);
let componentsContext = getContext(ComponentsContext.key);
</script>

<BlocksWrapper {blocks} {parent} {path} {styleProp}>
  {#if blocks}
    {#each blocks as block ("render-block-" + block.id)}
      <Block
        {block}
        context={context || builderContext}
        registeredComponents={registeredComponents ||
          componentsContext.registeredComponents}
      />
    {/each}
  {/if}

  {#if blocks}
    {#each blocks as block ("block-style-" + block.id)}
      <BlockStyles {block} context={$context || $builderContext} />
    {/each}
  {/if}
</BlocksWrapper>